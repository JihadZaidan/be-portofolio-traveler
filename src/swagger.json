{
  "openapi": "3.0.0",
  "info": {
    "title": "Travello API",
    "version": "1.0.0",
    "description": "API documentation for Travello application",
    "contact": {
      "name": "API Support",
      "email": "support@travello.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Development server"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health check endpoint",
        "description": "Check if the API is running",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "OK"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2026-01-27T00:00:00.000Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "summary": "API information",
        "description": "Get information about available API endpoints",
        "tags": ["Info"],
        "responses": {
          "200": {
            "description": "API information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "TRAVELLO API"
                    },
                    "endpoints": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "User login",
        "description": "Authenticate user with email and password",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User email",
                    "example": "test@example.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "User password",
                    "example": "password123"
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Login successful! Welcome back."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {"type": "string"},
                            "email": {"type": "string"},
                            "username": {"type": "string"},
                            "displayName": {"type": "string"}
                          }
                        },
                        "token": {"type": "string"}
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "summary": "User registration",
        "description": "Register a new user account",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "Unique username",
                    "example": "testuser"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User email",
                    "example": "test@example.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "User password",
                    "example": "password123"
                  },
                  "displayName": {
                    "type": "string",
                    "description": "Display name (optional)",
                    "example": "Test User"
                  }
                },
                "required": ["username", "email", "password"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Registration successful! You are now logged in."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {"type": "string"},
                            "email": {"type": "string"},
                            "username": {"type": "string"},
                            "displayName": {"type": "string"}
                          }
                        },
                        "token": {"type": "string"}
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "User already exists or invalid data"
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "summary": "Get current user",
        "description": "Get information about the currently authenticated user",
        "tags": ["Authentication"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User information",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User retrieved successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {"type": "string"},
                            "email": {"type": "string"},
                            "username": {"type": "string"},
                            "displayName": {"type": "string"},
                            "role": {"type": "string"}
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          }
        }
      }
    },
    "/api/auth/google": {
      "get": {
        "summary": "Google OAuth login",
        "description": "Initiate Google OAuth authentication",
        "tags": ["Authentication", "OAuth"],
        "responses": {
          "200": {
            "description": "Google OAuth URL generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Google OAuth URL generated"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "authUrl": {
                          "type": "string",
                          "example": "https://accounts.google.com/oauth/authorize?..."
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/github": {
      "get": {
        "summary": "GitHub OAuth login",
        "description": "Initiate GitHub OAuth authentication",
        "tags": ["Authentication", "OAuth"],
        "responses": {
          "200": {
            "description": "GitHub OAuth URL generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "GitHub OAuth URL generated"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "authUrl": {
                          "type": "string",
                          "example": "https://github.com/login/oauth/authorize?..."
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/github/callback": {
      "get": {
        "summary": "GitHub OAuth callback",
        "description": "Handle GitHub OAuth callback",
        "tags": ["Authentication", "OAuth"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from GitHub",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "GitHub OAuth authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "GitHub OAuth successful"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {"type": "string"},
                            "email": {"type": "string"},
                            "username": {"type": "string"},
                            "displayName": {"type": "string"},
                            "profilePicture": {"type": "string"}
                          }
                        },
                        "token": {
                          "type": "string",
                          "example": "jwt_token_here"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/google/callback": {
      "get": {
        "summary": "Google OAuth callback",
        "description": "Handle Google OAuth callback",
        "tags": ["Authentication", "OAuth"],
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from Google",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Google OAuth authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Google OAuth successful"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {"type": "string"},
                            "email": {"type": "string"},
                            "username": {"type": "string"},
                            "displayName": {"type": "string"}
                          }
                        },
                        "token": {
                          "type": "string",
                          "example": "jwt_token_here"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "summary": "User logout",
        "description": "Logout user and clear token",
        "tags": ["Authentication"],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/config": {
      "get": {
        "summary": "Check Google OAuth configuration",
        "description": "Check if Google OAuth is properly configured",
        "tags": ["Authentication"],
        "responses": {
          "200": {
            "description": "Configuration status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "config": {
                          "type": "object",
                          "properties": {
                            "clientId": {"type": "string"},
                            "callbackUrl": {"type": "string"}
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/payments/process": {
      "post": {
        "summary": "Process payment",
        "description": "Process a new payment with various payment methods",
        "tags": ["Payments"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["method", "amount", "description"],
                "properties": {
                  "method": {
                    "type": "string",
                    "enum": ["credit_card", "bank_transfer", "ewallet", "virtual_account"],
                    "example": "credit_card"
                  },
                  "amount": {
                    "type": "number",
                    "format": "decimal",
                    "minimum": 1000,
                    "example": 150000
                  },
                  "currency": {
                    "type": "string",
                    "default": "IDR",
                    "example": "IDR"
                  },
                  "description": {
                    "type": "string",
                    "example": "Hotel booking - Bali Resort"
                  },
                  "bookingId": {
                    "type": "string",
                    "example": "booking_12345"
                  },
                  "customerInfo": {
                    "type": "object",
                    "properties": {
                      "name": {"type": "string"},
                      "email": {"type": "string"},
                      "phone": {"type": "string"}
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment processed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Payment processed successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "paymentId": {
                          "type": "string",
                          "example": "pay_1234567890"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["pending", "processing", "completed", "failed"],
                          "example": "completed"
                        },
                        "amount": {
                          "type": "number",
                          "example": 150000
                        },
                        "currency": {
                          "type": "string",
                          "example": "IDR"
                        },
                        "method": {
                          "type": "string",
                          "example": "credit_card"
                        },
                        "gatewayResponse": {
                          "type": "object",
                          "properties": {
                            "transactionId": {"type": "string"},
                            "approvalCode": {"type": "string"},
                            "maskedCard": {"type": "string"}
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "Health check endpoints"
    },
    {
      "name": "Info",
      "description": "API information endpoints"
    },
    {
      "name": "Authentication",
      "description": "User authentication endpoints"
    },
    {
      "name": "OAuth",
      "description": "OAuth authentication endpoints"
    }
  ]
}
